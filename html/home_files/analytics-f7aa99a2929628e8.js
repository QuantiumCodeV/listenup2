(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{11950:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spaces/[spaceId]/analytics",function(){return a(13281)}])},13281:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eR}});var s=a(97458),l=a(55800),r=a(52983),n=a(30543),i=a(34001),o=a(51865),c=a.n(o),d=a(84294),u=e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:c()(e.height,e.width),style:{maxWidth:"50vw",maxHeight:"50vh"},children:(0,s.jsxs)("g",{fill:"none",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0Z"}),(0,s.jsx)("path",{className:c()(e.strokeWidth,e.stroke,e.color),strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),(0,s.jsx)("path",{className:c()(e.strokeWidth,e.stroke,e.color),strokeLinecap:"round",strokeLinejoin:"round",d:"M21 10a7 7 0 0 0-7-7v7h7Z"})]})}),h=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:c()(e.height,e.width),style:{maxWidth:"50vw",maxHeight:"50vh"},children:[(0,s.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,s.jsx)("path",{fill:"none",className:c()(e.strokeWidth,e.stroke,e.color),strokeLinecap:"round",strokeLinejoin:"round",d:"M14.75 15v4a2 2 0 0 1-2 2h-1.5a2 2 0 0 1-2-2v-4L3.508 8.57A2 2 0 0 1 3 7.236V6c0-1.657 4.03-3 9-3s9 1.343 9 3v1.237a2 2 0 0 1-.508 1.332Z"}),(0,s.jsx)("path",{fill:"none",className:c()(e.strokeWidth,e.stroke,e.color),strokeLinecap:"round",strokeLinejoin:"round",d:"M21 6c0 1.657-4.03 3-9 3S3 7.657 3 6"})]}),m=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:c()(e.height,e.width),style:{maxWidth:"50vw",maxHeight:"50vh"},children:[(0,s.jsx)("path",{fill:"none",d:"M0 24V0h24v24z"}),(0,s.jsxs)("g",{fill:"none",className:c()(e.strokeWidth,e.stroke,e.color),strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{width:18,height:18,x:3,y:3,rx:1.105,ry:0}),(0,s.jsx)("path",{d:"M3 15h18M3 9h18"})]})]}),x=a(41050),f=a(49625),p=a(1923),g=a(66069),j=a(3325),v=a(74701),w=a(7313),y=e=>{let{elements:t=[],renderLegendTitle:a=e=>(0,s.jsx)("span",{className:"text-neutral-500 block overflow-hidden text-ellipsis whitespace-nowrap",children:e.title}),renderLegendGlyph:l=e=>(0,s.jsx)("div",{className:"w-4 h-4 min-h-4 min-w-4 rounded-md",style:{backgroundColor:e.backgroundColor}})}=e,n=(0,r.useRef)(null),[i,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{n.current&&o(n.current.scrollWidth>n.current.clientWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,s.jsx)("div",{ref:n,className:"w-full flex items-center gap-4 overflow-x-auto no-scrollbar ".concat(i?"justify-start":"justify-center"),children:(0,s.jsx)("div",{className:"inline-flex items-center gap-4 ".concat(!i&&"justify-center"),children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2 items-center h-fit",children:[l(e),(0,s.jsx)("p",{className:"text-small whitespace-nowrap max-w-[250px] overflow-hidden",children:a(e)})]},"legend-".concat(t)))})})},k=a(86446),N=a(53152);let _=e=>{switch(e){case"manual":return"Manual";case"listenupChromeExtension":return"Chrome Extension";case"listenupAPI":return"API";case"internalApp":return"Internal";case"segment":return"Segment";case"intercom":return"Intercom";case"slack":return"Slack";default:return e}},S={...a(82301).jF,minWidth:60,backgroundColor:j.theme.colors.neutral[700],color:"white",borderRadius:7},b=(0,r.forwardRef)((e,t)=>{let{centerContent:a,data:l,radius:r,centerX:n,centerY:i,colorScale:o,renderTooltip:c}=e,{showTooltip:d,hideTooltip:u,tooltipData:h,tooltipTop:m=0,tooltipLeft:x=0}=(0,k.Z)(),{TooltipInPortal:f,containerRef:p}=(0,N.Z)({scroll:!0,detectBounds:!0});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)("svg",{ref:p,className:"h-full w-full",children:(0,s.jsxs)(w.Z,{top:i,left:n,children:[(0,s.jsx)(v.Z,{data:l,pieValue:e=>e.count,outerRadius:r,innerRadius:r/1.5,cornerRadius:3,padAngle:.015,pieSort:null,children:e=>e.arcs.map((t,a)=>(0,s.jsx)("g",{onMouseEnter:()=>d&&d({tooltipData:t.data,tooltipTop:e.path.centroid(t)[1],tooltipLeft:e.path.centroid(t)[0]}),onMouseLeave:()=>u&&u(),children:(0,s.jsx)("path",{d:e.path(t)||void 0,fill:o(t.data.title)})},"arc-".concat(a)))}),a]})})}),(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(y,{elements:null==l?void 0:l.map(e=>({title:_(e.title),backgroundColor:o(e.title)}))})}),c&&h&&(0,s.jsx)(f,{top:m,left:x,style:S,children:c(h)})]})});var Z=["#7357F6","#EE7D60","#97DFD8","#EFBE56","#A75E6E","#84BCEF","#F4B583","#397C9D","#5CA778","#F4BEB4","#C083D7","#73B5AF","#BBBBBB"],D=a(56772);let z=(0,r.forwardRef)((e,t)=>{let{}=e,a=[{title:"Yo",count:80},{title:"Ya",count:30},{title:"Yu",count:6},{title:"Yk",count:5}].sort((e,t)=>t.count-e.count);return(0,s.jsx)("div",{className:"w-full flex items-center gap-4 overflow-x-auto no-scrollbar",children:a.slice(0,a.length).map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2 items-center h-fit",children:[(0,s.jsx)("div",{className:"w-4 h-4 min-h-4 min-w-4 rounded-md bg-neutral-200 animate-pulse"}),(0,s.jsx)(D.Z,{className:"w-20 h-4 bg-neutral-200 animate-pulse"})]},"legend-".concat(t)))})}),M=(0,r.forwardRef)((e,t)=>{let{radius:a,centerX:l,centerY:r,disableAnimation:n=!1}=e,i=[{title:"Yo",count:80},{title:"Ya",count:30},{title:"Yu",count:6},{title:"Yk",count:5}].sort((e,t)=>t.count-e.count);return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)("svg",{className:"h-full w-full",children:(0,s.jsxs)(w.Z,{top:r,left:l,children:[(0,s.jsx)(v.Z,{data:i,pieValue:e=>e.count,outerRadius:a,innerRadius:a/1.5,cornerRadius:3,padAngle:.015,pieSort:null,children:e=>e.arcs.map((t,a)=>(0,s.jsx)("g",{children:(0,s.jsx)("path",{d:e.path(t)||void 0,fill:j.theme.colors.neutral[200],className:"animate-pulse"})},"arc-".concat(a)))}),(0,s.jsx)("rect",{fill:j.theme.colors.neutral[200],className:"animate-pulse transform -translate-x-[8%]",width:80,height:20,rx:"7",x:"0",dy:"10em"})]})})}),(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(z,{})})]})}),L=(0,r.forwardRef)((e,t)=>{let{radius:a,centerX:l,centerY:r,disableAnimation:n=!1,mode:i="no-data"}=e,o=[{title:"Intercom",count:80},{title:"Slack",count:30},{title:"Chrome Extension",count:12},{title:"In-app feedback",count:6},{title:"G2",count:5},{title:"Trustpilot",count:5}],c=(o||[]).sort((e,t)=>t.count-e.count),d=(0,p.Z)({domain:c.map(e=>e.title),range:0==c.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(c.length/Z.length)-1).fill(Z)).flat()});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)(b,{ref:t,data:o,centerX:l,centerY:r,radius:a,colorScale:d,centerContent:(0,s.jsxs)("text",{textAnchor:"middle",style:{fontSize:"1.5rem",fontWeight:"bold"},children:[(0,s.jsx)("tspan",{x:"0",dy:"0em",children:(0,g.Z)(54e3)}),(0,s.jsx)("tspan",{x:"0",dy:"1.4em",className:"p",style:{color:j.theme.colors.neutral[500]},children:"captures"})]})}),"no-data"==i&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var O=a(84685),F=()=>(0,s.jsxs)("div",{className:"h-full w-full flex flex-col gap-2 items-center justify-center",children:[(0,s.jsx)(O.Z,{width:"w-10",height:"h-10",stroke:"stroke-warning-500",strokeWidth:"stroke-2"}),(0,s.jsx)("h3",{children:"Something went wrong"})]}),T=a(45804),A=e=>{var t,a,l,i;let{widgetId:o,filteredDate:c,filteredSources:d,filteredTagsIDs:u,mode:h}=e,m=(0,n.s)(e=>e.selectedSpaceId),v=(0,x.a)(["get-analytics-widget-captures-sources",m,c,d,u],async()=>{let e=new URLSearchParams({filter_date:c,filter_tags_ids:JSON.stringify(u),filter_sources:JSON.stringify(d)});return(await f.Z.get("/spaces/".concat(m,"/analytics/widgets/captures-sources?").concat(e.toString()))).data},{enabled:!!m&&"real-data"==h,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),w=v.isLoading||v.isFetching&&v.isPreviousData,y=(0,r.useRef)(null),[k,N]=r.useState(0),[S,D]=r.useState(0),[z,O]=r.useState(0),A=()=>{if(y.current){let{width:e,height:t}=y.current.getBoundingClientRect();N(Math.min(e,t)/2-15),D(e/2),O(t/2)}};(0,r.useEffect)(()=>(A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}),[v.data]);let W=(null===(t=v.data)||void 0===t?void 0:t.source_repartion)?v.data.source_repartion.sort((e,t)=>t.count-e.count):void 0,P=W?(0,p.Z)({domain:W.map(e=>e.capture_source),range:0==W.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(W.length/Z.length)-1).fill(Z)).flat()}):void 0;return w&&"real-data"==h?(0,s.jsx)(M,{ref:y,centerX:S,centerY:z,radius:k}):!w&&v.error?(0,s.jsx)(F,{}):!w&&W&&P&&"real-data"==h?(0,s.jsx)(b,{ref:y,data:null===(a=v.data)||void 0===a?void 0:a.source_repartion.map(e=>({title:e.capture_source,count:e.count})),centerX:S,centerY:z,radius:k,colorScale:P,centerContent:(0,s.jsxs)("text",{textAnchor:"middle",style:{fontSize:"1.5rem",fontWeight:"bold"},children:[(0,s.jsx)("tspan",{x:"0",dy:"0em",children:(0,g.Z)(null!==(i=null===(l=v.data)||void 0===l?void 0:l.total_captures_count)&&void 0!==i?i:0)}),(0,s.jsx)("tspan",{x:"0",dy:"1.4em",className:"p",style:{color:j.theme.colors.neutral[500]},children:"captures"})]}),renderTooltip:e=>(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[(0,s.jsxs)("section",{className:"flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:e.title,size:T.Z.Size.Small,stroke:"stroke-neutral-50"}),(0,s.jsx)("h5",{className:"text-neutral-50",children:_(e.title)})]}),(0,s.jsxs)("p",{className:"text-neutral-50",children:[(0,g.Z)(e.count)," captures"]})]})}):(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(L,{ref:y,centerX:S,centerY:z,radius:k,mode:"placeholder"==h?"gallery":"no-data"})})},W=a(43126),P=a(48546),I=a(98891),C=a(22505),E=a(81270),J=a(16823),R=a(37581),V=a(92924),U=a(64703);let B=(0,r.forwardRef)((e,t)=>{let{mode:a="no-data"}=e,l=(0,P.Cl)(),[n,i]=(0,r.useState)([]),o=async()=>{let e=[];e.push(l.accessor("first_name",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"user"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"User"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(V.ZP,{size:V.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(l.accessor("insights_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"insight"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(J.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"insights"]})]}),size:1,minSize:1,maxSize:1})),e.push(l.accessor("captures_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"capture"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(R.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"captures"]})]}),size:1,minSize:1,maxSize:1})),i(e)};return(0,r.useEffect)(()=>{o()},[]),(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)(W.Z,{data:[{id:1,email:"robin@listenup.ai",first_name:"Robin",last_name:"Labrot",insights_count:2400,captures_count:1933,edges:{}},{id:2,email:"thomas@listenup.ai",first_name:"Thomas",last_name:"Duvergne",insights_count:2046,captures_count:304,edges:{}},{id:3,email:"henry@listenup.ai",first_name:"Henry",last_name:"Dash",insights_count:1832,captures_count:1038,edges:{}},{id:4,email:"sophie@listenup.ai",first_name:"Sophie",last_name:"Delatte",insights_count:852,captures_count:498,edges:{}}],columns:n}),"no-data"==a&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var X=e=>{let{widgetId:t,filteredDate:a,filteredSources:l,filteredTagsIDs:o,mode:c}=e,d=(0,n.s)(e=>e.selectedSpaceId),u=(0,i.I)(e=>e.openDialog),h=(0,i.I)(e=>e.dialogStack),m=(0,x.a)(["get-analytics-widget-users-with-the-most-insights",d,a,l,o],async()=>{let e=new URLSearchParams({filter_date:a,filter_tags_ids:JSON.stringify(o),filter_sources:JSON.stringify(l)});return(await f.Z.get("/spaces/".concat(d,"/analytics/widgets/users-with-most-insights?").concat(e.toString()))).data},{enabled:!!d&&"real-data"==c,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){y()},onError(e){}}),p=m.isLoading||m.isFetching&&m.isPreviousData,j=(0,P.Cl)(),[v,w]=(0,r.useState)([]),y=async()=>{let e=[];e.push(j.accessor("first_name",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"user"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"User"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(V.ZP,{size:V.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(j.accessor("insights_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"insight"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(J.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"insights"]})]}),size:1,minSize:1,maxSize:1})),e.push(j.accessor("captures_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"capture"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(R.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"captures"]})]}),size:1,minSize:1,maxSize:1})),w(e)},k=async e=>{u({children:(0,s.jsx)(U.Z,{userId:e,zIndexIncrement:C.s.dialog+h.length+1,mode:"modal"}),size:i.P.ExtraLarge,padding:"p-0",animation:"normal"})};return p&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(I.Z,{numberOfColumns:3,numberOfRows:7,hideHeaders:!0})}):!p&&m.error?(0,s.jsx)(F,{}):!p&&"today"!=a&&m.data&&m.data.users&&m.data.users.length>0&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(W.Z,{data:m.data.users,columns:v,handleClick:k})}):(0,s.jsx)(B,{mode:"placeholder"==c?"gallery":"no-data"})};let Y=(0,r.forwardRef)((e,t)=>{let{mode:a="no-data"}=e,l=(0,P.Cl)(),[n,i]=(0,r.useState)([]),o=async()=>{let e=[];e.push(l.accessor("first_name",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"user"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"User"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(V.ZP,{size:V.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(l.accessor("insights_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"insight"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(J.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"insights"]})]}),size:1,minSize:1,maxSize:1})),e.push(l.accessor("captures_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"capture"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(R.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"captures"]})]}),size:1,minSize:1,maxSize:1})),i(e)};return(0,r.useEffect)(()=>{o()},[]),(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)(W.Z,{data:[{id:1,email:"robin@listenup.ai",first_name:"Robin",last_name:"Labrot",insights_count:0,captures_count:0,edges:{}},{id:2,email:"thomas@listenup.ai",first_name:"Thomas",last_name:"Duvergne",insights_count:2,captures_count:1,edges:{}},{id:3,email:"henry@listenup.ai",first_name:"Henry",last_name:"Dash",insights_count:10,captures_count:3,edges:{}},{id:4,email:"sophie@listenup.ai",first_name:"Sophie",last_name:"Delatte",insights_count:34,captures_count:10,edges:{}}],columns:n}),"no-data"==a&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var H=e=>{let{widgetId:t,filteredDate:a,filteredSources:l,filteredTagsIDs:o,mode:c}=e,d=(0,n.s)(e=>e.selectedSpaceId),u=(0,i.I)(e=>e.openDialog),h=(0,i.I)(e=>e.dialogStack),m=(0,x.a)(["get-analytics-widget-users-with-the-least-insights",d,a,l,o],async()=>{let e=new URLSearchParams({filter_date:a,filter_tags_ids:JSON.stringify(o),filter_sources:JSON.stringify(l)});return(await f.Z.get("/spaces/".concat(d,"/analytics/widgets/users-with-least-insights?").concat(e.toString()))).data},{enabled:!!d&&"real-data"==c,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){y()},onError(e){}}),p=m.isLoading||m.isFetching&&m.isPreviousData,j=(0,P.Cl)(),[v,w]=(0,r.useState)([]),y=async()=>{let e=[];e.push(j.accessor("first_name",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"user"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"User"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(V.ZP,{size:V.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(j.accessor("insights_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"insight"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(J.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"insights"]})]}),size:1,minSize:1,maxSize:1})),e.push(j.accessor("captures_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"capture"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(R.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"captures"]})]}),size:1,minSize:1,maxSize:1})),w(e)},k=async e=>{u({children:(0,s.jsx)(U.Z,{userId:e,zIndexIncrement:C.s.dialog+h.length+1,mode:"modal"}),size:i.P.ExtraLarge,padding:"p-0",animation:"normal"})};return p&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(I.Z,{numberOfColumns:3,numberOfRows:7,hideHeaders:!0})}):!p&&m.error?(0,s.jsx)(F,{}):!p&&"today"!=a&&m.data&&m.data.users&&m.data.users.length>0&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(W.Z,{data:m.data.users,columns:v,handleClick:k})}):(0,s.jsx)(Y,{mode:"placeholder"==c?"gallery":"no-data"})},K=a(53744);let G=(0,r.forwardRef)((e,t)=>{let{mode:a="no-data"}=e,l=[{id:1,pattern_title:"Missing collaboration features",total:2300,edges:{}},{id:2,pattern_title:"Analytics is underwhelming",total:1800,edges:{}},{id:3,pattern_title:"Settings are unclear",total:1300,edges:{}}],n=(0,P.Cl)(),i=(0,r.useMemo)(()=>{let e=Math.max(...(null==l?void 0:l.map(e=>e.total))||[0]);return[n.accessor("pattern_title",{header:()=>(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("p",{className:"text-neutral-600",children:"Title"})}),cell:e=>(0,s.jsx)("div",{className:"wrapper flex items-center gap-2 w-full overflow-hidden",children:(0,s.jsx)("h5",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.getValue()})}),size:50}),n.accessor("total",{header:()=>(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("p",{className:"text-neutral-600",children:"Total"})}),cell:t=>{let a=t.getValue(),l=a/e*100;return(0,s.jsx)("div",{className:"wrapper flex items-center gap-2 w-full",children:(0,s.jsx)("div",{className:"h-full bg-[#A69BE9] border-1 border-[#b2add4] rounded-sm flex items-center justify-start px-2",style:{width:"".concat(l,"%")},children:(0,s.jsx)("h5",{className:"text-neutral-50",children:(0,g.Z)(a)})})})},size:50})]},[]);return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(W.Z,{data:l,columns:i,hideHeaders:!0})}),"no-data"==a&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var q=e=>{let{widgetId:t,filteredDate:a,filteredSources:l,filteredTagsIDs:o,mode:c}=e,d=(0,n.s)(e=>e.selectedSpaceId),u=(0,i.I)(e=>e.openDialog),h=(0,i.I)(e=>e.dialogStack),m=(0,x.a)(["get-analytics-widget-top-patterns",d,a,l,o],async()=>{let e=new URLSearchParams({filter_date:a,filter_tags_ids:JSON.stringify(o),filter_sources:JSON.stringify(l)});return(await f.Z.get("/spaces/".concat(d,"/analytics/widgets/top-patterns?").concat(e.toString()))).data},{enabled:!!d&&"real-data"==c,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),p=m.isLoading||m.isFetching&&m.isPreviousData,j=(0,P.Cl)(),v=(0,r.useMemo)(()=>{var e,t;let a=Math.max(...(null===(t=m.data)||void 0===t?void 0:null===(e=t.top_patterns)||void 0===e?void 0:e.map(e=>e.total))||[0]);return[j.accessor("pattern_title",{header:()=>(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("p",{className:"text-neutral-600",children:"Title"})}),cell:e=>(0,s.jsx)("div",{className:"wrapper flex items-center gap-2 w-full overflow-hidden",children:(0,s.jsx)("h5",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.getValue()})}),size:50}),j.accessor("total",{header:()=>(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("p",{className:"text-neutral-600",children:"Total"})}),cell:e=>{let t=e.getValue(),l=t/a*100;return(0,s.jsx)("div",{className:"wrapper flex items-center gap-2 w-full",children:(0,s.jsx)("div",{className:"h-full bg-[#A69BE9] border-1 border-[#958BD2] rounded-sm flex items-center justify-start px-2",style:{width:"".concat(l,"%")},children:(0,s.jsx)("h5",{className:"text-neutral-50",children:(0,g.Z)(t)})})})},size:50})]},[m.data]),w=async e=>{u({children:(0,s.jsx)(K.Z,{zIndexIncrement:C.s.dialog+h.length+1,insightId:e,mode:"modal"}),size:i.P.ExtraLarge,padding:"p-0",animation:"normal"})};return p&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(I.Z,{numberOfColumns:2,numberOfRows:5,hideHeaders:!0})}):!p&&m.error?(0,s.jsx)(F,{}):!p&&"today"!=a&&m.data&&m.data.top_patterns&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(W.Z,{data:m.data.top_patterns,columns:v,handleClick:w,hideHeaders:!0})}):(0,s.jsx)(G,{mode:"placeholder"==c?"gallery":"no-data"})};let Q=(0,r.forwardRef)((e,t)=>{let{mode:a="no-data"}=e,l=(0,P.Cl)(),[n,i]=(0,r.useState)([]),o=async()=>{let e=[];e.push(l.accessor("first_name",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"user"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Member"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(V.ZP,{size:V.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(l.accessor("insights_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"insight"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(J.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"insights"]})]}),size:1,minSize:1,maxSize:1})),e.push(l.accessor("captures_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"capture"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(R.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"captures"]})]}),size:1,minSize:1,maxSize:1})),i(e)};return(0,r.useEffect)(()=>{o()},[]),(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)(W.Z,{data:[{id:1,email:"robin@listenup.ai",first_name:"Robin",last_name:"Labrot",insights_count:3948,captures_count:2920,edges:{}},{id:2,email:"thomas@listenup.ai",first_name:"Thomas",last_name:"Duvergne",insights_count:3231,captures_count:2020,edges:{}},{id:3,email:"henry@listenup.ai",first_name:"Henry",last_name:"Dash",insights_count:798,captures_count:409,edges:{}},{id:4,email:"sophie@listenup.ai",first_name:"Sophie",last_name:"Delatte",insights_count:239,captures_count:102,edges:{}}],columns:n}),"no-data"==a&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var $=e=>{let{widgetId:t,filteredDate:a,filteredSources:l,filteredTagsIDs:o,mode:c}=e,d=(0,n.s)(e=>e.selectedSpaceId);(0,i.I)(e=>e.openDialog),(0,i.I)(e=>e.dialogStack);let u=(0,x.a)(["get-analytics-widget-team-members-activity",d,a,l,o],async()=>{let e=new URLSearchParams({filter_date:a,filter_tags_ids:JSON.stringify(o),filter_sources:JSON.stringify(l)});return(await f.Z.get("/spaces/".concat(d,"/analytics/widgets/team-members-activity?").concat(e.toString()))).data},{enabled:!!d&&"real-data"==c,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){v()},onError(e){}}),h=u.isLoading||u.isFetching&&u.isPreviousData,m=(0,P.Cl)(),[p,j]=(0,r.useState)([]),v=async()=>{let e=[];e.push(m.accessor("first_name",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"user"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Member"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper flex items-center gap-2 overflow-hidden",children:[(0,s.jsx)(V.ZP,{size:V.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,s.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(m.accessor("insights_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"insight"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(J.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"insights added"]})]}),size:1,minSize:1,maxSize:1})),e.push(m.accessor("captures_count",{header:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{attributeName:"capture"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,s.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,s.jsx)(R.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-bold",children:[(0,g.Z)(e.getValue())," "]}),"captures treated"]})]}),size:1,minSize:1,maxSize:1})),j(e)};return h&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(I.Z,{numberOfColumns:3,numberOfRows:7,hideHeaders:!0})}):!h&&u.error?(0,s.jsx)(F,{}):!h&&"today"!=a&&u.data&&u.data.members&&u.data.members.length>0&&"real-data"==c?(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(W.Z,{data:u.data.members,columns:p})}):(0,s.jsx)(Q,{mode:"placeholder"==c?"gallery":"no-data"})};let ee=(0,r.forwardRef)((e,t)=>{let{radius:a,centerX:l,centerY:r,disableAnimation:n=!1,mode:i="no-data"}=e,o=[{title:"Intercom",count:70},{title:"Slack",count:40},{title:"Chrome Extension",count:20},{title:"In-app feedback",count:6},{title:"G2",count:5},{title:"Trustpilot",count:5}],c=(o||[]).sort((e,t)=>t.count-e.count),d=(0,p.Z)({domain:c.map(e=>e.title),range:0==c.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(c.length/Z.length)-1).fill(Z)).flat()});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)(b,{ref:t,data:o,centerX:l,centerY:r,radius:a,centerContent:(0,s.jsxs)("text",{textAnchor:"middle",style:{fontSize:"1.5rem",fontWeight:"bold"},children:[(0,s.jsx)("tspan",{x:"0",dy:"0em",children:(0,g.Z)(249e3)}),(0,s.jsx)("tspan",{x:"0",dy:"1.4em",className:"p",style:{color:j.theme.colors.neutral[500]},children:"insights"})]}),colorScale:d}),"no-data"==i&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"No data, update your filters"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var et=e=>{var t,a,l,i;let{widgetId:o,filteredDate:c,filteredSources:d,filteredTagsIDs:u,mode:h}=e,m=(0,n.s)(e=>e.selectedSpaceId),v=(0,x.a)(["get-analytics-widget-insights-sources",m,c,d,u],async()=>{let e=new URLSearchParams({filter_date:c,filter_tags_ids:JSON.stringify(u),filter_sources:JSON.stringify(d)});return(await f.Z.get("/spaces/".concat(m,"/analytics/widgets/insights-sources?").concat(e.toString()))).data},{enabled:!!m&&"real-data"==h,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),w=v.isLoading||v.isFetching&&v.isPreviousData,y=(0,r.useRef)(null),[k,N]=r.useState(0),[S,D]=r.useState(0),[z,L]=r.useState(0),O=()=>{if(y.current){let{width:e,height:t}=y.current.getBoundingClientRect();N(Math.min(e,t)/2-15),D(e/2),L(t/2)}};(0,r.useEffect)(()=>(O(),window.addEventListener("resize",O),()=>{window.removeEventListener("resize",O)}),[v.data]);let A=(null===(t=v.data)||void 0===t?void 0:t.source_repartion)?v.data.source_repartion.sort((e,t)=>t.count-e.count):void 0,W=A?(0,p.Z)({domain:A.map(e=>e.capture_source),range:0==A.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(A.length/Z.length)-1).fill(Z)).flat()}):void 0;return w&&"real-data"==h?(0,s.jsx)(M,{ref:y,centerX:S,centerY:z,radius:k}):!w&&v.error?(0,s.jsx)(F,{}):!w&&A&&W&&"real-data"==h?(0,s.jsx)(b,{ref:y,colorScale:W,data:null===(a=v.data)||void 0===a?void 0:a.source_repartion.map(e=>({title:e.capture_source,count:e.count})),centerX:S,centerY:z,radius:k,centerContent:(0,s.jsxs)("text",{textAnchor:"middle",style:{fontSize:"1.5rem",fontWeight:"bold"},children:[(0,s.jsx)("tspan",{x:"0",dy:"0em",children:(0,g.Z)(null!==(i=null===(l=v.data)||void 0===l?void 0:l.total_captures_count)&&void 0!==i?i:0)}),(0,s.jsx)("tspan",{x:"0",dy:"1.4em",className:"p",style:{color:j.theme.colors.neutral[500]},children:"insights"})]}),renderTooltip:e=>(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[(0,s.jsxs)("section",{className:"flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:e.title,size:T.Z.Size.Small,stroke:"stroke-neutral-50"}),(0,s.jsx)("h5",{className:"text-neutral-50",children:_(e.title)})]}),(0,s.jsxs)("p",{className:"text-neutral-50",children:[(0,g.Z)(e.count)," captures"]})]})}):(0,s.jsx)("div",{className:"h-full w-full",children:(0,s.jsx)(ee,{ref:y,centerX:S,centerY:z,radius:k,mode:"placeholder"==h?"gallery":"no-data"})})},ea=a(777),es=a(7961),el=a(586),er=a(41289),en=a(51987),ei=a(70438);let eo=(0,r.forwardRef)((e,t)=>{let{disableAnimation:a=!1,mode:l="no-data"}=e,r=[{line_name:"Limited collaboration feature",data:n(10,30)},{line_name:"Difficulty managing component",data:n(5,25)},{line_name:"Steep learning curve for beginners",data:n(15,40)}];function n(e,t){let a=new Date,s=new Date(a);s.setMonth(s.getMonth()-3,1);let l=[],r=new Date(s);for(;r<=a;)l.push({y_value:Math.floor(Math.random()*(t-e+1))+e,x_value:new Date(r)}),r.setDate(r.getDate()+14);return l}let i=(()=>{let e=en.ou.now(),t=e.minus({months:3}).startOf("month"),a=e.endOf("day");return{range:[t.toJSDate(),a.toJSDate()],tickFormat:e=>(e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e)).toFormat("MMM"),numTicks:3}})(),o=(0,p.Z)({domain:r.map(e=>e.line_name),range:0==r.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(r.length/Z.length)-1).fill(Z)).flat()});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)(ei.Z,{children:e=>(0,s.jsxs)(ea.Z,{height:e.height,width:e.width,margin:{top:15,right:15,bottom:30,left:30},xScale:{type:"time",domain:i.range,nice:!0},yScale:{type:"linear"},children:[(0,s.jsx)(es.Z,{orientation:"bottom",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],numTicks:i.numTicks,tickFormat:i.tickFormat,tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta"}}}),(0,s.jsx)(es.Z,{orientation:"left",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],hideAxisLine:!0,tickFormat:e=>Math.round(Number(e)).toString(),tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta",textAnchor:"middle",dx:"-1em"}},hideTicks:!0,numTicks:4}),(0,s.jsx)(el.Z,{columns:!1,numTicks:4,lineStyle:{stroke:j.theme.colors.neutral[300],strokeWidth:.5}}),r.map((e,t)=>(0,s.jsx)(er.Z,{dataKey:e.line_name,data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:o(e.line_name)},e.line_name))]})})}),(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(y,{elements:r.map(e=>({title:_(e.line_name),backgroundColor:o(e.line_name)}))})}),"no-data"==l&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var ec=a(29907),ed=a(57297),eu=a(42130);function eh(e){let{cx:t=0,cy:a=0,className:l,r=7,fill:n="#7856FF",...i}=e;return(0,s.jsxs)(w.Z,{className:c()("visx-glyph",l),children:[(0,s.jsx)("circle",{className:"visx-glyph-halo",cx:t,cy:a,r:r+3,fill:n,fillOpacity:.2}),(0,s.jsx)("circle",{className:c()("visx-glyph-dot",l),cx:t,cy:a,r:r,fill:n,stroke:j.theme.colors.neutral[50],strokeWidth:3,...i})]})}let em=(0,r.forwardRef)((e,t)=>{let{lines:a,chartType:l="lines",xAxisConfig:n,yAxisConfig:i={numTicks:4,tickFormat:e=>Math.round(Number(e)).toString()},yScale:o={type:"linear",nice:!0,zero:!0},xScale:c={type:"time",domain:n?n.range:void 0,nice:!0},colorScale:d,margin:u={top:15,right:15,bottom:30,left:30},onClick:h,renderTooltip:m,hideLegend:x=!1,legendRenderLegendTitle:f,legendRenderLegendGlyph:p}=e;return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)(ei.Z,{children:e=>(0,s.jsxs)(ea.Z,{onPointerUp:e=>{h&&h(e)},height:e.height,width:e.width,margin:u,xScale:c,yScale:o,children:[(0,s.jsx)(es.Z,{orientation:"bottom",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],numTicks:n?n.numTicks:void 0,tickFormat:n?n.tickFormat:void 0,tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta"}}}),(0,s.jsx)(es.Z,{orientation:"left",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],hideAxisLine:!0,numTicks:i?i.numTicks:void 0,tickFormat:i?i.tickFormat:void 0,tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta",textAnchor:"middle",dx:"-1em"}},hideTicks:!0}),(0,s.jsx)(el.Z,{columns:!1,numTicks:i?i.numTicks:void 0,lineStyle:{stroke:j.theme.colors.neutral[300],strokeWidth:.5}}),"lines"==l&&a.map((e,t)=>(0,s.jsx)(er.Z,{dataKey:e.line_id,data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:d(e.line_name)},e.line_id)),"areas"==l&&a.map((e,t)=>{let a=d(e.line_name);return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(ec.Z,{dataKey:"".concat(e.line_id,"-area"),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,fill:a,fillOpacity:.3}),(0,s.jsx)(er.Z,{dataKey:"".concat(e.line_id,"-line"),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:a,strokeWidth:2})]},e.line_id)}),"areas-stack"==l&&(0,s.jsx)(ed.Z,{offset:"expand",order:"reverse",children:a.map((e,t)=>{let a=d(e.line_name);return(0,s.jsx)(ec.Z,{dataKey:"".concat(e.line_id),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,fill:a,fillOpacity:.3})})}),m&&(0,s.jsx)(eu.Z,{renderTooltip:m,snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showDatumGlyph:!0,style:S,renderGlyph:e=>{var t,l;let{key:r,x:n,y:i,size:o,color:c,onPointerMove:u,onPointerOut:h,onPointerUp:m}=e;return(0,s.jsx)(eh,{cx:n,cy:i,r:7,fill:d(null!==(l=null===(t=a.find(e=>e.line_id==r))||void 0===t?void 0:t.line_name)&&void 0!==l?l:""),onPointerMove:u,onPointerOut:h,onPointerUp:m})}})]})})}),!x&&(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(y,{elements:null==a?void 0:a.map(e=>({title:e.line_name,backgroundColor:d(e.line_name)})),renderLegendTitle:f||void 0,renderLegendGlyph:p||void 0})})]})}),ex=(0,r.forwardRef)((e,t)=>{let{chartType:a="lines",disableAnimation:l=!1}=e,n=[{line_name:"UX",data:i(10,30)},{line_name:"Analytics",data:i(5,25)},{line_name:"Settings",data:i(15,40)}];function i(e,t){let a=new Date,s=new Date(a);s.setMonth(s.getMonth()-3);let l=[],r=new Date(s);for(;r<=a;)l.push({y_value:Math.floor(Math.random()*(t-e+1))+e,x_value:new Date(r)}),r.setDate(r.getDate()+14);return l}let o=(()=>{let e=en.ou.now(),t=e.minus({months:3}).startOf("month"),a=e.endOf("day");return{range:[t.toJSDate(),a.toJSDate()],tickFormat:e=>(e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e)).toFormat("MMM"),numTicks:3}})();return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)(ei.Z,{children:e=>(0,s.jsxs)(ea.Z,{height:e.height,width:e.width,margin:{top:15,right:15,bottom:30,left:30},xScale:{type:"time",domain:o.range,nice:!0},yScale:{type:"linear"},children:[(0,s.jsx)(es.Z,{orientation:"bottom",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],numTicks:o.numTicks,tickComponent:e=>{let{x:t,y:a,formattedValue:l}=e;return(0,s.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:(0,s.jsx)("rect",{x:-15,y:-5,width:30,height:10,fill:j.theme.colors.neutral[200],className:"animate-pulse rounded",rx:2})})}}),(0,s.jsx)(es.Z,{orientation:"left",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],hideAxisLine:!0,tickComponent:e=>{let{x:t,y:a,formattedValue:l}=e;return(0,s.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:(0,s.jsx)("rect",{x:-15,y:-5,width:10,height:10,fill:j.theme.colors.neutral[200],className:"animate-pulse rounded",rx:2})})},hideTicks:!0,numTicks:4}),(0,s.jsx)(el.Z,{columns:!1,numTicks:4,lineStyle:{stroke:j.theme.colors.neutral[300],strokeWidth:.5}}),"lines"==a&&n.map((e,t)=>(0,s.jsx)(er.Z,{dataKey:e.line_name,data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:j.theme.colors.neutral[200],className:"animate-pulse"},e.line_name)),"areas"==a&&n.map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(ec.Z,{dataKey:"".concat(e.line_name,"-area"),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,fill:j.theme.colors.neutral[200],fillOpacity:.3,className:"animate-pulse"}),(0,s.jsx)(er.Z,{dataKey:e.line_name,data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:j.theme.colors.neutral[200]},e.line_name)]},e.line_name)),"areas-stack"==a&&(0,s.jsx)(ed.Z,{offset:"expand",children:n.map((e,t)=>(0,s.jsx)(ec.Z,{dataKey:"".concat(e.line_name),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,fill:j.theme.colors.neutral[200],fillOpacity:.7,className:"animate-pulse"}))})]})})}),(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(z,{})})]})});var ef=e=>{var t,a,l,r,i,o,c,d,u;let{widgetId:h,filteredDate:m,filteredSources:g,filteredTagsIDs:j,mode:v}=e,w=(0,n.s)(e=>e.selectedSpaceId),y=(0,x.a)(["get-analytics-widget-tags-over-time",w,m,g,j],async()=>{let e=new URLSearchParams({filter_date:m,filter_tags_ids:JSON.stringify(j),filter_sources:JSON.stringify(g)});return(await f.Z.get("/spaces/".concat(w,"/analytics/widgets/tags-over-time?").concat(e.toString()))).data},{enabled:!!w&&"real-data"==v,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),k=y.isLoading||y.isFetching&&y.isPreviousData,N=null!==(i=null===(a=y.data)||void 0===a?void 0:null===(t=a.tags_evolution)||void 0===t?void 0:t.length)&&void 0!==i?i:0,_=Z.length,S=N>0?Array(Math.max(1,Math.ceil(N/_))).fill(Z).flat():Z,b=Z.concat(S.slice(_)),D=(0,p.Z)({domain:null!==(o=null===(r=y.data)||void 0===r?void 0:null===(l=r.tags_evolution)||void 0===l?void 0:l.map(e=>e.name))&&void 0!==o?o:[],range:b}),z=y.data&&((e,t)=>{let a,s,l,r;let n=en.ou.now(),i=e=>e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e);switch(e){case"last_week":a=n.minus({weeks:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("ccc"),r=7;break;case"last_month":a=n.minus({months:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("d"),r=4;break;case"last_year":a=n.minus({years:1}).startOf("month"),s=n.endOf("month"),l=e=>i(e).toFormat("MMM"),r=12;break;default:a=n.minus({months:3}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("MMM"),r=5}return{range:[a.toJSDate(),s.toJSDate()],tickFormat:l,numTicks:r}})(m,y.data);return k&&"real-data"==v?(0,s.jsx)(ex,{}):!k&&y.error?(0,s.jsx)(F,{}):!k&&"today"!=m&&y.data&&y.data.tags_evolution&&y.data.tags_evolution.length>0&&D&&z&&"real-data"==v?(0,s.jsx)(em,{lines:null!==(u=null===(d=y.data)||void 0===d?void 0:null===(c=d.tags_evolution)||void 0===c?void 0:c.map(e=>{var t;return{line_name:e.name,line_id:e.name,data:null!==(t=e.insights.map(e=>({x_value:new Date(e.date),y_value:null!==e.count&&void 0!==e.count?e.count:void 0})))&&void 0!==t?t:[]}}))&&void 0!==u?u:[],colorScale:D,xAxisConfig:z,renderTooltip:e=>{let{tooltipData:t,colorScale:a}=e;if(!(null==t?void 0:t.nearestDatum))return null;let{datum:l,key:r}=t.nearestDatum;return(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[(0,s.jsx)("h4",{className:"text-neutral-50",children:r}),(0,s.jsxs)("p",{className:"text-neutral-50",children:[l.y_value," ",1==l.y_value?"insight":"insights"]}),(0,s.jsx)("p",{className:"text-neutral-50 text-small",children:l.x_value&&en.ou.fromJSDate(l.x_value).toFormat("yyyy LLL dd")})]})}}):(0,s.jsx)(eo,{mode:"placeholder"==v?"gallery":"no-data"})};let ep=(0,r.forwardRef)((e,t)=>{let{disableAnimation:a=!1,mode:l="no-data"}=e,r=[{line_name:"UX",data:n(10,30)},{line_name:"Analytics",data:n(5,25)},{line_name:"Settings",data:n(15,40)}];function n(e,t){let a=new Date,s=new Date(a);s.setMonth(s.getMonth()-3,1);let l=[],r=new Date(s);for(;r<=a;)l.push({y_value:Math.floor(Math.random()*(t-e+1))+e,x_value:new Date(r)}),r.setDate(r.getDate()+14);return l}let i=(()=>{let e=en.ou.now(),t=e.minus({months:3}).startOf("month"),a=e.endOf("day");return{range:[t.toJSDate(),a.toJSDate()],tickFormat:e=>(e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e)).toFormat("MMM"),numTicks:3}})(),o=(0,p.Z)({domain:r.map(e=>e.line_name),range:0==r.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(r.length/Z.length)-1).fill(Z)).flat()});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)(ei.Z,{children:e=>(0,s.jsxs)(ea.Z,{height:e.height,width:e.width,margin:{top:15,right:15,bottom:30,left:30},xScale:{type:"time",domain:i.range,nice:!0},yScale:{type:"linear"},children:[(0,s.jsx)(es.Z,{orientation:"bottom",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],numTicks:i.numTicks,tickFormat:i.tickFormat,tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta"}}}),(0,s.jsx)(es.Z,{orientation:"left",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],hideAxisLine:!0,tickFormat:e=>Math.round(Number(e)).toString(),tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta",textAnchor:"middle",dx:"-1em"}},hideTicks:!0,numTicks:4}),(0,s.jsx)(el.Z,{columns:!1,numTicks:4,lineStyle:{stroke:j.theme.colors.neutral[300],strokeWidth:.5}}),r.map((e,t)=>(0,s.jsx)(er.Z,{dataKey:e.line_name,data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:o(e.line_name)},e.line_name))]})})}),(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(y,{elements:r.map(e=>({title:_(e.line_name),backgroundColor:o(e.line_name)}))})}),"no-data"==l&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var eg=e=>{var t,a,l,r,o,c,d,u,h;let{widgetId:m,filteredDate:g,filteredSources:j,filteredTagsIDs:v,mode:w}=e,y=(0,n.s)(e=>e.selectedSpaceId),k=(0,i.I)(e=>e.openDialog),N=(0,i.I)(e=>e.dialogStack),_=(0,x.a)(["get-analytics-widget-patterns-over-time",y,g,j,v],async()=>{let e=new URLSearchParams({filter_date:g,filter_tags_ids:JSON.stringify(v),filter_sources:JSON.stringify(j)});return(await f.Z.get("/spaces/".concat(y,"/analytics/widgets/patterns-over-time?").concat(e.toString()))).data},{enabled:!!y&&"real-data"==w,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),S=_.isLoading||_.isFetching&&_.isPreviousData,b=null!==(o=null===(a=_.data)||void 0===a?void 0:null===(t=a.patterns_evolution)||void 0===t?void 0:t.length)&&void 0!==o?o:0,D=Z.length,z=b>0?Array(Math.max(1,Math.ceil(b/D))).fill(Z).flat():Z,M=Z.concat(z.slice(D)),L=(0,p.Z)({domain:null!==(c=null===(r=_.data)||void 0===r?void 0:null===(l=r.patterns_evolution)||void 0===l?void 0:l.map(e=>e.title))&&void 0!==c?c:[],range:M}),O=_.data&&((e,t)=>{let a,s,l,r;let n=en.ou.now(),i=e=>e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e);switch(e){case"last_week":a=n.minus({weeks:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("ccc"),r=7;break;case"last_month":a=n.minus({months:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("d"),r=4;break;case"last_year":a=n.minus({years:1}).startOf("month"),s=n.endOf("month"),l=e=>i(e).toFormat("MMM"),r=12;break;default:a=n.minus({months:3}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("MMM"),r=3}return{range:[a.toJSDate(),s.toJSDate()],tickFormat:l,numTicks:r}})(g,_.data);return S&&"real-data"==w?(0,s.jsx)(ex,{}):!S&&_.error?(0,s.jsx)(F,{}):!S&&"today"!=g&&_.data&&_.data.patterns_evolution&&_.data.patterns_evolution.length>0&&L&&O&&"real-data"==w?(0,s.jsx)(em,{lines:null!==(h=null===(u=_.data)||void 0===u?void 0:null===(d=u.patterns_evolution)||void 0===d?void 0:d.map(e=>{var t;return{line_name:e.title,line_id:e.id.toString(),data:null!==(t=e.insights.map(e=>({x_value:new Date(e.date),y_value:null!==e.count&&void 0!==e.count?e.count:void 0})))&&void 0!==t?t:[]}}))&&void 0!==h?h:[],colorScale:L,xAxisConfig:O,onClick:e=>{k({children:(0,s.jsx)(K.Z,{zIndexIncrement:C.s.dialog+N.length+1,insightId:parseInt(e.key),mode:"modal"}),size:i.P.ExtraLarge,padding:"p-0",animation:"normal"})},renderTooltip:e=>{var t;let{tooltipData:a,colorScale:l}=e;if(!(null==a?void 0:a.nearestDatum))return null;let{datum:r,key:n}=a.nearestDatum,i=null===(t=_.data.patterns_evolution)||void 0===t?void 0:t.find(e=>e.id==Number(n));return(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[(0,s.jsx)("h4",{className:"text-neutral-50",children:null==i?void 0:i.title}),(0,s.jsxs)("p",{className:"text-neutral-50",children:[r.y_value," ",1==r.y_value?"insight":"insights"]}),(0,s.jsx)("p",{className:"text-neutral-50 text-small",children:r.x_value&&en.ou.fromJSDate(r.x_value).toFormat("yyyy LLL dd")})]})}}):(0,s.jsx)(ep,{mode:"placeholder"==w?"gallery":"no-data"})};let ej=(0,r.forwardRef)((e,t)=>{let{disableAnimation:a=!1,mode:l="no-data"}=e,n=[{line_name:"Captures",data:function(e,t){let a=new Date,s=new Date(a);s.setMonth(s.getMonth()-3,1);let l=[],r=new Date(s);for(;r<=a;)l.push({y_value:Math.floor(21*Math.random())+10,x_value:new Date(r)}),r.setDate(r.getDate()+14);return l}(10,0)}],i=(()=>{let e=en.ou.now(),t=e.minus({months:3}).startOf("month"),a=e.endOf("day");return{range:[t.toJSDate(),a.toJSDate()],tickFormat:e=>(e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e)).toFormat("MMM"),numTicks:3}})(),o=(0,p.Z)({domain:n.map(e=>e.line_name),range:0==n.length?Z.concat([,].fill(Z)).flat():Z.concat(Array(Math.ceil(n.length/Z.length)-1).fill(Z)).flat()});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)(ei.Z,{children:e=>(0,s.jsxs)(ea.Z,{height:e.height,width:e.width,margin:{top:15,right:15,bottom:30,left:30},xScale:{type:"time",domain:i.range,nice:!0},yScale:{type:"linear"},children:[(0,s.jsx)(es.Z,{orientation:"bottom",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],numTicks:i.numTicks,tickFormat:i.tickFormat,tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta"}}}),(0,s.jsx)(es.Z,{orientation:"left",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],hideAxisLine:!0,tickFormat:e=>Math.round(Number(e)).toString(),tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta",textAnchor:"middle",dx:"-1em"}},hideTicks:!0,numTicks:4}),(0,s.jsx)(el.Z,{columns:!1,numTicks:4,lineStyle:{stroke:j.theme.colors.neutral[300],strokeWidth:.5}}),n.map((e,t)=>{let a=o(e.line_name);return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(ec.Z,{dataKey:"".concat(e.line_name,"-area"),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,fill:a,fillOpacity:.3}),(0,s.jsx)(er.Z,{dataKey:"".concat(e.line_name,"-line"),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,stroke:a,strokeWidth:2})]},e.line_name)})]})})}),"no-data"==l&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var ev=e=>{var t,a;let{widgetId:l,filteredDate:r,filteredSources:i,filteredTagsIDs:o,mode:c}=e,d=(0,n.s)(e=>e.selectedSpaceId),u=(0,x.a)(["get-analytics-widget-captures-over-time",d,r,i,o],async()=>{let e=new URLSearchParams({filter_date:r,filter_tags_ids:JSON.stringify(o),filter_sources:JSON.stringify(i)});return(await f.Z.get("/spaces/".concat(d,"/analytics/widgets/captures-over-time?").concat(e.toString()))).data},{enabled:!!d&&"real-data"==c,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),h=u.isLoading||u.isFetching&&u.isPreviousData,m=Z[0]||"#000000",j=(0,p.Z)({domain:["captures"],range:[m]}),v=u.data&&((e,t)=>{let a,s,l,r;let n=en.ou.now(),i=e=>e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e);switch(e){case"last_week":a=n.minus({weeks:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("ccc"),r=7;break;case"last_month":a=n.minus({months:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("d"),r=4;break;case"last_year":a=n.minus({years:1}).startOf("month"),s=n.endOf("month"),l=e=>i(e).toFormat("MMM"),r=12;break;default:a=n.minus({months:3}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("MMM"),r=5}return{range:[a.toJSDate(),s.toJSDate()],tickFormat:l,numTicks:r}})(r,u.data);return h&&"real-data"==c?(0,s.jsx)(ex,{chartType:"areas"}):!h&&u.error?(0,s.jsx)(F,{}):!h&&"today"!=r&&u.data&&u.data.captures_evolution&&u.data.captures_evolution.captures&&u.data.captures_evolution.captures.length>0&&0!=u.data.captures_evolution.total&&j&&v&&"real-data"==c?(0,s.jsx)(em,{chartType:"areas",lines:[{line_name:"1",line_id:"1",data:null!==(a=null===(t=u.data)||void 0===t?void 0:t.captures_evolution.captures.map(e=>({x_value:new Date(e.date),y_value:null!==e.count&&void 0!==e.count?e.count:void 0})))&&void 0!==a?a:[]}],hideLegend:!0,colorScale:j,xAxisConfig:v,renderTooltip:e=>{var t;let{tooltipData:a,colorScale:l}=e;if(!(null==a?void 0:a.nearestDatum))return null;let{datum:r,key:n}=a.nearestDatum;return(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[(0,s.jsx)("h4",{className:"text-neutral-50"}),(0,s.jsxs)("p",{className:"text-neutral-50",children:[(0,g.Z)(null!==(t=r.y_value)&&void 0!==t?t:0)," ",1==r.y_value?"capture":"captures"]}),(0,s.jsx)("p",{className:"text-neutral-50 text-small",children:r.x_value&&en.ou.fromJSDate(r.x_value).toFormat("yyyy LLL dd")})]})}}):(0,s.jsx)(ej,{mode:"placeholder"==c?"gallery":"no-data"})},ew=a(60844),ey=a.n(ew),ek=a(41037);let eN=(0,r.forwardRef)((e,t)=>{var a;let{disableAnimation:l=!1,mode:r="no-data"}=e,n=(()=>{let e=new Date,t=t=>{let a=new Date(e);return a.setMonth(a.getMonth()-t),a.toISOString()};return[{type:"positive",total:60,sentiments:[{date:t(3),percentage:28},{date:t(2),percentage:25},{date:t(1),percentage:32},{date:e.toISOString(),percentage:40}]},{type:"neutral",total:120,sentiments:[{date:t(3),percentage:47},{date:t(2),percentage:55},{date:t(1),percentage:48},{date:e.toISOString(),percentage:45}]},{type:"negative",total:60,sentiments:[{date:t(3),percentage:25},{date:t(2),percentage:20},{date:t(1),percentage:20},{date:e.toISOString(),percentage:15}]}]})(),i=null!==(a=null==n?void 0:n.map(e=>{var t,a;return{line_name:e.type,line_id:e.type.toString(),data:null!==(a=null===(t=e.sentiments)||void 0===t?void 0:t.map(e=>({x_value:new Date(e.date),y_value:e.percentage})))&&void 0!==a?a:[]}}))&&void 0!==a?a:[],o=(()=>{let e=en.ou.now(),t=e.minus({months:3}).startOf("month"),a=e.endOf("day");return{range:[t.toJSDate(),a.toJSDate()],tickFormat:e=>(e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e)).toFormat("MMM"),numTicks:3}})(),c=(0,p.Z)({domain:n.map(e=>e.type.toString()),range:[j.theme.colors.success[500],j.theme.colors.warning[500],j.theme.colors.danger[500]]});return(0,s.jsxs)("div",{className:"h-full w-full flex flex-col relative",children:[(0,s.jsx)("div",{className:"h-full w-full",ref:t,children:(0,s.jsx)(ei.Z,{children:e=>(0,s.jsxs)(ea.Z,{height:e.height,width:e.width,margin:{top:15,right:15,bottom:30,left:40},xScale:{type:"time",domain:o.range,nice:!0},yScale:{type:"linear"},children:[(0,s.jsx)(es.Z,{orientation:"bottom",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],numTicks:o.numTicks,tickFormat:o.tickFormat,tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta"}}}),(0,s.jsx)(es.Z,{orientation:"left",strokeWidth:1,stroke:j.theme.colors.neutral[300],strokeDasharray:j.theme.colors.neutral[300],tickStroke:j.theme.colors.neutral[300],hideAxisLine:!0,numTicks:10,tickFormat:e=>(100*e).toString()+"%",tickLabelProps:e=>{let{tick:t,index:a}=e;return{fill:j.theme.colors.neutral[600],fontSize:12,fontFamily:"jakarta",textAnchor:"middle",dx:"-1em"}},hideTicks:!0}),(0,s.jsx)(el.Z,{columns:!1,numTicks:10,lineStyle:{stroke:j.theme.colors.neutral[300],strokeWidth:.5}}),(0,s.jsx)(ed.Z,{offset:"expand",order:"reverse",children:i.map((e,t)=>{let a=c(e.line_id);return(0,s.jsx)(ec.Z,{dataKey:"".concat(e.line_id),data:e.data,xAccessor:e=>e.x_value,yAccessor:e=>e.y_value,fill:a,fillOpacity:.3})})})]})})}),(0,s.jsx)("div",{className:"w-full h-fit pb-2 pl-2",children:(0,s.jsx)(y,{elements:i.map(e=>({title:_(e.line_id),backgroundColor:c(e.line_id)})),renderLegendTitle:e=>(0,s.jsx)("span",{className:"text-neutral-500 block overflow-hidden text-ellipsis whitespace-nowrap",children:ey()(e.title)}),renderLegendGlyph:e=>(0,s.jsxs)(s.Fragment,{children:["positive"==e.title&&(0,ek.Xf)(.75,"stroke-success-500"),"neutral"==e.title&&(0,ek.Xf)(.5,"stroke-warning-500"),"negative"==e.title&&(0,ek.Xf)(.25,"stroke-danger-500")]})})}),"no-data"==r&&(0,s.jsxs)("section",{className:"absolute h-full w-full flex items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-neutral-100 p-2 flex items-center justify-center border-1 border-neutral-400 rounded shadow-smooth z-10 translate-y-3",children:(0,s.jsx)("h5",{className:"text-neutral-600",children:"Not enough data"})}),(0,s.jsx)("div",{className:"h-full w-full bg-neutral-100 opacity-70 absolute"})]})]})});var e_=e=>{var t,a,l,r,i,o;let{widgetId:c,filteredDate:d,filteredSources:u,filteredTagsIDs:h,mode:m}=e,g=(0,n.s)(e=>e.selectedSpaceId),v=(0,x.a)(["get-analytics-widget-sentiment-over-time",g,d,u,h],async()=>{let e=new URLSearchParams({filter_date:d,filter_tags_ids:JSON.stringify(h),filter_sources:JSON.stringify(u)});return(await f.Z.get("/spaces/".concat(g,"/analytics/widgets/sentiment-over-time?").concat(e.toString()))).data},{enabled:!!g&&"real-data"==m,keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess(e){},onError(e){}}),w=v.isLoading||v.isFetching&&v.isPreviousData,y=(0,p.Z)({domain:null!==(l=null===(a=v.data)||void 0===a?void 0:null===(t=a.sentiments_evolution)||void 0===t?void 0:t.map(e=>e.type.toString()))&&void 0!==l?l:[],range:[j.theme.colors.success[500],j.theme.colors.warning[500],j.theme.colors.danger[500]]}),k=v.data&&((e,t)=>{let a,s,l,r;let n=en.ou.now(),i=e=>e instanceof Date?en.ou.fromJSDate(e):en.ou.fromMillis(e);switch(e){case"last_week":a=n.minus({weeks:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("ccc"),r=7;break;case"last_month":a=n.minus({months:1}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("d"),r=4;break;case"last_year":a=n.minus({years:1}).startOf("month"),s=n.endOf("month"),l=e=>i(e).toFormat("MMM"),r=12;break;default:a=n.minus({months:3}).startOf("day"),s=n.endOf("day"),l=e=>i(e).toFormat("MMM"),r=5}return{range:[a.toJSDate(),s.toJSDate()],tickFormat:l,numTicks:r}})(d,v.data);return w&&"real-data"==m?(0,s.jsx)(ex,{chartType:"areas-stack"}):!w&&v.error?(0,s.jsx)(F,{}):!w&&"today"!=d&&v.data&&v.data.sentiments_evolution&&v.data.sentiments_evolution.length>0&&y&&k&&"real-data"==m?(0,s.jsx)(em,{lines:null!==(o=null===(i=v.data)||void 0===i?void 0:null===(r=i.sentiments_evolution)||void 0===r?void 0:r.map(e=>{var t,a;return{line_name:e.type,line_id:e.type.toString(),data:null!==(a=null===(t=e.sentiments)||void 0===t?void 0:t.map(e=>({x_value:new Date(e.date),y_value:e.percentage})))&&void 0!==a?a:[]}}))&&void 0!==o?o:[],yScale:{type:"linear"},yAxisConfig:{numTicks:10,tickFormat:e=>(100*e).toString()+"%"},chartType:"areas-stack",margin:{top:15,right:15,bottom:30,left:40},colorScale:y,xAxisConfig:k,legendRenderLegendTitle:e=>(0,s.jsx)("span",{className:"text-neutral-500 block overflow-hidden text-ellipsis whitespace-nowrap",children:ey()(e.title)}),legendRenderLegendGlyph:e=>(0,s.jsxs)(s.Fragment,{children:["positive"==e.title&&(0,ek.Xf)(.75,"stroke-success-500"),"neutral"==e.title&&(0,ek.Xf)(.5,"stroke-warning-500"),"negative"==e.title&&(0,ek.Xf)(.25,"stroke-danger-500")]}),renderTooltip:e=>{var t;let{tooltipData:a,colorScale:l}=e;if(!(null==a?void 0:a.nearestDatum))return null;let{datum:r,key:n}=a.nearestDatum;return(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("p",{className:"text-neutral-50",children:[null===(t=r.y_value)||void 0===t?void 0:t.toFixed(1)," %"]}),"positive"==n&&(0,ek.Xf)(.75,"stroke-success-500"),"neutral"==n&&(0,ek.Xf)(.5,"stroke-warning-500"),"negative"==n&&(0,ek.Xf)(.25,"stroke-danger-500"),(0,s.jsx)("p",{className:"text-neutral-50",children:n})]}),(0,s.jsx)("p",{className:"text-neutral-50 text-small",children:r.x_value&&en.ou.fromJSDate(r.x_value).toFormat("yyyy LLL dd")})]})}}):(0,s.jsx)(eN,{mode:"placeholder"==m?"gallery":"no-data"})};let eS={overview:"Overview","captures-sources":"Capture sources","insights-tags-over-time":"Tags over time","patterns-over-time":"Patterns over time","users-with-the-most-insights":"Users with the most insights","users-with-the-least-insights":"Users with the least insights","top-patterns":"Top patterns","team-members-activity":"Activity per team member","captures-over-time":"Captures over time","sentiment-over-time":"Sentiment over time"},eb={overview:(0,s.jsx)(d.Z,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"insights-sources":(0,s.jsx)(u,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"captures-sources":(0,s.jsx)(u,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"insights-tags-over-time":(0,s.jsx)(h,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"patterns-over-time":(0,s.jsx)(h,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"users-with-the-most-insights":(0,s.jsx)(m,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"users-with-the-least-insights":(0,s.jsx)(m,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"top-patterns":(0,s.jsx)(e=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:c()(e.height,e.width),style:{maxWidth:"50vw",maxHeight:"50vh"},children:(0,s.jsxs)("g",{fill:"none",children:[(0,s.jsx)("path",{d:"M24 0v24H0V0Z"}),(0,s.jsx)("path",{className:c()(e.strokeWidth,e.stroke,e.color),strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21v-4h18v4ZM3 14v-4h12.316v4ZM3 7V3h6.632v4Z"})]})}),{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"team-members-activity":(0,s.jsx)(m,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"captures-over-time":(0,s.jsx)(h,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"sentiment-over-time":(0,s.jsx)(h,{width:"w-5",height:"h-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"})},eZ={"insights-sources":e=>(0,s.jsx)(et,{...e}),"captures-sources":e=>(0,s.jsx)(A,{...e}),"insights-tags-over-time":e=>(0,s.jsx)(ef,{...e}),"patterns-over-time":e=>(0,s.jsx)(eg,{...e}),"users-with-the-most-insights":e=>(0,s.jsx)(X,{...e}),"users-with-the-least-insights":e=>(0,s.jsx)(H,{...e}),"top-patterns":e=>(0,s.jsx)(q,{...e}),"team-members-activity":e=>(0,s.jsx)($,{...e}),"captures-over-time":e=>(0,s.jsx)(ev,{...e}),"sentiment-over-time":e=>(0,s.jsx)(e_,{...e})};var eD=e=>{var t;let{widgetId:a,filteredDate:l,filteredSources:r,filteredTagsIDs:n,mode:i="real-data"}=e,o=eZ[a];return(0,s.jsxs)("div",{className:c()("h-full w-full bg-neutral-50 border-1 border-neutral-400 rounded flex flex-col overflow-hidden"),children:[(0,s.jsxs)("section",{className:"w-full h-fit flex items-center gap-2 p-3 border-b-1 border-neutral-400",children:[eb[a],(0,s.jsx)("h4",{children:null!==(t=eS[a])&&void 0!==t?t:"Oooops something went wrong"})]}),(0,s.jsx)("section",{className:"h-full w-full",children:o?(0,s.jsx)(o,{widgetId:a,filteredDate:l,filteredSources:r,filteredTagsIDs:n,mode:i}):(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,s.jsx)(O.Z,{width:"w-12",height:"h-12",strokeWidth:"stroke-2",stroke:"stroke-warning-700"})})})]})},ez=a(69682),eM=a(24222),eL=a(36071),eO=a(49461),eF=a(75216),eT=a(916),eA=a(30209),eW=a(66021),eP=e=>{let{filteredDate:t,setFilteredDate:a,filteredTagsIDs:l,onTagSelect:r,filteredSources:n,onSourceSelect:i,clearSelectedTags:o}=e,c=[(0,s.jsx)(eF.Lt,{state:l.length>0?eF.Lt.state.Activated:eF.Lt.state.Default,content:(0,s.jsx)(eW.Z,{selectedTagIds:l,handleTagSelection:e=>{r(e)},clearSelectedTags:()=>{o()}}),children:(0,s.jsxs)("div",{className:"flex items-center text-left",children:[(0,s.jsx)(eO.Z,{height:"h-5",strokeWidth:"stroke-2",color:"stroke-neutral-700"}),(0,s.jsx)("h5",{className:"px-2",children:"Tags"})]})}),(0,s.jsx)(eF.Lt,{width:eF.Lt.width.Small,state:"all"!=t?eF.Lt.state.Activated:eF.Lt.state.Default,content:(0,s.jsxs)(eF.Y_,{value:t,onValueChange:e=>{("today"==e||"last_week"==e||"last_month"==e||"last_year"==e||"all"==e)&&a(e)},children:[(0,s.jsx)(eF.rp,{value:"today",children:(0,s.jsx)("h5",{children:"Today"})}),(0,s.jsx)(eF.rp,{value:"last_week",children:(0,s.jsx)("h5",{children:"Last Week"})}),(0,s.jsx)(eF.rp,{value:"last_month",children:(0,s.jsx)("h5",{children:"Last Month"})}),(0,s.jsx)(eF.rp,{value:"last_year",children:(0,s.jsx)("h5",{children:"Last Year"})}),(0,s.jsx)(eF.rp,{value:"all",children:(0,s.jsx)("h5",{children:"All"})})]}),children:(0,s.jsxs)("div",{className:"flex items-center text-left",children:[(0,s.jsx)(eL.Z,{height:"h-5",strokeWidth:"stroke-2",color:"stroke-neutral-700"}),(0,s.jsx)("h5",{className:"px-2",children:"Dates"})]})}),(0,s.jsx)(eF.Lt,{width:eF.Lt.width.FitContent,state:n.length>0?eF.Lt.state.Activated:eF.Lt.state.Default,content:(0,s.jsx)(eT.mY,{children:(0,s.jsx)(eT.e8,{children:(0,s.jsxs)(eT.fu,{children:[(0,s.jsxs)(eT.di,{className:"flex justify-between gap-10",onSelect:()=>{i(eM.d.ChromeExtension)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"listenupChromeExtension",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Extension"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.ChromeExtension),onToggle:()=>{}})]},"toggle-source-listenupChromeExtension"),(0,s.jsxs)(eT.di,{className:"flex justify-between gap-10",onSelect:()=>{i(eM.d.Manual)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"manual",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Manual"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.Manual),onToggle:()=>{}})]},"toggle-source-manual"),(0,s.jsxs)(eT.di,{className:"flex justify-between",onSelect:()=>{i(eM.d.Slack)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"slack",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Slack"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.Slack),onToggle:()=>{}})]},"toggle-source-slack"),(0,s.jsxs)(eT.di,{className:"flex justify-between",onSelect:()=>{i(eM.d.Intercom)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"intercom",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Intercom"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.Intercom),onToggle:()=>{}})]},"toggle-source-intercom"),(0,s.jsxs)(eT.di,{className:"flex justify-between",onSelect:()=>{i(eM.d.Zendesk)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"zendesk",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Zendesk"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.Zendesk),onToggle:()=>{}})]},"toggle-source-zendesk"),(0,s.jsxs)(eT.di,{className:"flex justify-between",onSelect:()=>{i(eM.d.Hubspot)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"hubspot",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Hubspot"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.Hubspot),onToggle:()=>{}})]},"toggle-source-hubspot"),(0,s.jsxs)(eT.di,{className:"flex justify-between",onSelect:()=>{i(eM.d.Email)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"email",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"Email"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.Email),onToggle:()=>{}})]},"toggle-source-email"),(0,s.jsxs)(eT.di,{className:"flex justify-between",onSelect:()=>{i(eM.d.ListenUpAPI)},children:[(0,s.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,s.jsx)(T.Z,{source:"listenupAPI",size:T.Z.Size.Small}),(0,s.jsx)("h5",{children:"API"})]}),(0,s.jsx)(eA.Z,{toggle:n.includes(eM.d.ListenUpAPI),onToggle:()=>{}})]},"toggle-source-listenup-api")]})})}),children:(0,s.jsxs)("div",{className:"flex items-center text-left",children:[(0,s.jsx)(R.Z,{height:"h-5",strokeWidth:"stroke-2",color:"stroke-neutral-700"}),(0,s.jsx)("h5",{className:"px-2",children:"Sources"})]})})];return(0,s.jsx)("div",{className:"bg-neutral-50 border-[0.13rem] border-neutral-400 border-dashed p-2 w-fit h-16 rounded flex items-center gap-2 shadow-lg",children:c.map((e,t)=>(0,s.jsx)("div",{children:e},t))})},eI=a(89735),eC=a(17307),eE=()=>{let e=(0,n.s)(e=>e.selectedSpaceId),t=(0,i.I)(e=>e.openDialog),a=(0,n.s)(e=>e.listenupSubscription),l=(null==a?void 0:a.status)==="active"&&("enterprise_plan"===a.plan||"premium_plan"===a.plan)||void 0===a,o=()=>{l||t({children:(0,s.jsx)(eI.Z,{hideUsage:!0,upsellFeature:eI.Z.missingFeature.Analytics}),padding:"p-0",size:i.P.Large})},[d,u]=(0,r.useState)("all"),[h,m]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),{data:j,isLoading:v,isFetching:w,isPreviousData:y}=(0,x.a)(["get-analytics-views",e,d,h,p],async()=>(await f.Z.get("/spaces/".concat(e,"/analytics/views"))).data,{enabled:!!e&&!!l,keepPreviousData:!0,refetchInterval:0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,onError(){ez.A.error("Ooops we couldn't load your dashboard \uD83D\uDE15",{description:"An error occured, please try again later"})}});(0,r.useRef)(null);let[k,N]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{j&&!v&&(e=>{var t;let a=null===(t=e.analytics_views[0])||void 0===t?void 0:t.edges.widgets;a&&N({rows:Object.entries(a.reduce((e,t)=>{var a,s;let l=null!==(s=t.row_index)&&void 0!==s?s:0;return e[l]||(e[l]=[]),null===(a=e[l])||void 0===a||a.push(t),e},{})).sort((e,t)=>{let[a]=e,[s]=t;return Number(a)-Number(s)}).map(e=>{let[t,a]=e;return a.sort((e,t)=>{var a,s;return(null!==(a=e.order_index)&&void 0!==a?a:0)-(null!==(s=t.order_index)&&void 0!==s?s:0)})})})})(j)},[j,v]),(0,s.jsxs)("div",{className:"h-full w-full flex flex-row flex-wrap justify-start bg-neutral-100 overflow-y-auto",children:[(0,s.jsx)("section",{className:"my-2 px-14 sticky self-start top-2 z-20 flex items-center justify-between",children:(0,s.jsx)(eP,{filteredDate:d,setFilteredDate:u,filteredTagsIDs:p,onTagSelect:e=>{p.includes(e)?g(t=>t.filter(t=>t!==e)):g([...p,e])},filteredSources:h,onSourceSelect:e=>{h.includes(e)?m(t=>t.filter(t=>t!==e)):m([...h,e])},clearSelectedTags:()=>{g([])}})}),(0,s.jsxs)("div",{className:"my-4 px-14 relative w-full",children:[j&&j.analytics_views&&(0,s.jsx)("div",{className:c()(!l&&"pointer-events-none"),children:k&&k.rows.map(e=>(0,s.jsx)("div",{className:"w-full flex flex-row mb-6",children:e.map(e=>{var t;return(0,s.jsx)("div",{className:"flex-1 mr-6",style:{height:e.height_px+"px",width:e.width_percent+"%",minWidth:"100px",minHeight:"100px"},children:(0,s.jsx)(eD,{widgetId:null!==(t=e.widget_id)&&void 0!==t?t:"",filteredDate:d,filteredSources:h,filteredTagsIDs:p,mode:l?"real-data":"placeholder"})})})}))}),!l&&(0,s.jsxs)("div",{className:"z-20 flex flex-col gap-4 items-center justify-center h-full w-full absolute top-0 left-0 bg-gradient-to-t from-50% from-primary-100 to-primary-100/0",children:[(0,s.jsx)("p",{className:"text-8xl",children:"\uD83D\uDD10"}),(0,s.jsx)("h1",{children:"You don't have access to this feature"}),(0,s.jsx)("p",{className:"text-center",children:"SoundLine! Insight Analytics is only available on the Pro Plan"}),(0,s.jsx)(eC.zx,{variant:eC.zx.variant.Magic,onClick:()=>{o()},children:(0,s.jsx)("h4",{children:"Get feature"})})]})]})]})};let eJ=()=>(0,s.jsx)(l.Z,{children:(0,s.jsx)(eE,{})});eJ.auth=!0;var eR=eJ}},function(e){e.O(0,[185,651,899,800,888,774,179],function(){return e(e.s=11950)}),_N_E=e.O()}]);