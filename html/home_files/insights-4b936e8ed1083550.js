(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{59794:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spaces/[spaceId]/insights",function(){return s(63699)}])},63699:function(e,t,s){"use strict";s.r(t);var i=s(97458),l=s(30543),n=s(26264),r=s(49625),a=s(69946),c=s(52983),o=s(91721),h=s(24222),d=s(66069),f=s(89433),u=s(66231),x=s(67041),g=s(69682),m=s(17307),j=s(34001),p=s(6275),w=s(52430),N=s(95315),v=s(30744),S=s(62898),y=s(55800),_=s(51865),k=s.n(_);let D=()=>{let e=(0,l.s)(e=>e.selectedSpaceId),t=(0,j.I)(e=>e.openDialog),[s,_]=(0,c.useState)("newest"),[D,z]=(0,c.useState)("all"),[Z,b]=(0,c.useState)([]),[P,I]=(0,c.useState)([]),[O,A]=(0,c.useState)([]),[E,T]=(0,c.useState)([]),[J,C]=(0,c.useState)(!1),[F,M]=(0,c.useState)(""),{data:W,isFetching:B,isLoading:H,isPreviousData:Q,fetchNextPage:R,hasNextPage:U,isFetchingNextPage:V}=(0,n.N)(["get-insights",s,D,Z,P,O,E,e,J,F],async t=>{let{pageParam:i=0}=t,l=new URLSearchParams({filter_patterns_ids:JSON.stringify([]),filter_chat_items_ids:JSON.stringify([]),filter_date:D,filter_sentiments:JSON.stringify(Z),filter_tags_ids:JSON.stringify(O),filter_users_ids:JSON.stringify([]),filter_insight_types:JSON.stringify(E),filter_sources:JSON.stringify(P),filter_archived:JSON.stringify(J),no_children_insights_patterns:"true",q:F,sort:s,offset:(15*i).toString(),limit:"15"});return(await r.Z.get("/spaces/".concat(e,"/insights?").concat(l.toString()))).data},{getNextPageParam:e=>{let t=e.offset/e.limit;return t<Math.ceil(e.total/e.limit)-1?t+1:void 0},enabled:!!e,keepPreviousData:!0,refetchOnWindowFocus:!1,onError:()=>{g.A.error("Ooops we couldn't load your insights \uD83D\uDE15",{description:"An error occured, please try again later"})}}),X=H||B&&Q,q=(0,c.useMemo)(()=>W?W.pages.map(e=>e.insights).flat():[],[W]),[G,L]=(0,c.useState)([]),Y=""!==F||"all"!==D||Z.length>0||P.length>0||E.length>0||O.length>0,K=()=>{_("newest"),z("all"),b([]),I([]),A([]),T([]),C(!1),M("")};return(0,i.jsx)(y.Z,{children:(0,i.jsxs)("div",{className:k()("h-full w-full overflow-y-auto relative"),children:[(0,i.jsx)("div",{className:"w-full flex justify-start items-center px-14 mt-2",children:(0,i.jsx)(x.Z,{mode:x.Z.Mode.PatternGeneration,spaceTotalInsights:W&&W.pages[0]?W.pages[0].totalAll:0})}),(0,i.jsx)("section",{className:"my-2 px-14 sticky self-start top-2 z-20 flex items-center justify-between",children:(0,i.jsx)(h.ZP,{onSearchSend:e=>{M(e)},filteredDate:D,setFilteredDate:z,filteredSentiments:Z,onSentimentSelect:e=>{Z.includes(e)?b(t=>t.filter(t=>t!==e)):b([...Z,e])},filteredTagsIDs:O,onTagSelect:e=>{O.includes(e)?A(t=>t.filter(t=>t!==e)):A([...O,e])},filteredSources:P,onSourceSelect:e=>{P.includes(e)?I(t=>t.filter(t=>t!==e)):I([...P,e])},filteredInsightTypes:E,onInsightTypeSelect:e=>{E.includes(e)?T(t=>t.filter(t=>t!==e)):T([...E,e])},filteredArchived:J,onFilteredArchivedSelect:e=>{C(e)},clearSelectedTags:()=>{A([])},shouldShowAskButton:!0})}),(0,i.jsxs)("section",{className:"px-14 py-2 h-full w-full",children:[(0,i.jsxs)("div",{className:"w-full flex justify-between items-center my-4",children:[!X&&W&&q.length>0&&W.pages[0]?(0,i.jsxs)("h5",{className:"text-neutral-600",children:[(0,d.Z)(W.pages[0].total)," /"," ",(0,d.Z)(W.pages[0].totalAll)," total insights (",Math.round(100*W.pages[0].total/W.pages[0].totalAll),"% of all insights)"]}):(0,i.jsx)("div",{}),(0,i.jsx)(v.P,{variant:v.P.variant.Tertiary,width:v.P.width.Small,value:s,setValue:e=>{("newest"==e||"oldest"==e)&&_(e)},position:"popper",content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Q,{value:"newest",children:(0,i.jsx)("h5",{children:"Newest"})}),(0,i.jsx)(v.Q,{value:"oldest",children:(0,i.jsx)("h5",{children:"Oldest"})})]}),selectedValueRender:(0,i.jsxs)("div",{className:"flex items-center text-left",children:[(0,i.jsx)(u.Z,{height:"h-5",strokeWidth:"stroke-2",color:"stroke-neutral-600"}),(0,i.jsx)("h5",{className:"px-2 text-neutral-600",children:(0,S.Z)(s)})]})})]}),!X&&W&&(0,i.jsx)(a.Z,{insights:q,isSelectable:!0,selectedInsightIDs:G,handleInsightSelection:e=>{G.includes(e)?L(t=>t.filter(t=>t!==e)):L([...G,e])},fetchNextPage:R,hasNextPage:U,isFetchingNextPage:V}),0==q.length&&!Y&&!X&&(0,i.jsxs)("div",{className:"h-4/5 w-full relative",children:[(0,i.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,i.jsx)(o.Z,{disableAnimation:!0})}),(0,i.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center h-full w-full absolute top-0 left-0 bg-gradient-to-t from-30% from-primary-100 to-primary-100/0",children:[(0,i.jsx)("p",{className:"text-8xl",children:"\uD83E\uDDDE‍♂️"}),(0,i.jsx)("h1",{children:"You don’t have insights"}),(0,i.jsxs)("p",{className:"text-center",children:["No insights yet! Start highlighting important parts in your captures",(0,i.jsx)("br",{})," in the 'inbox' section to create valuable insights"]}),(0,i.jsx)("section",{className:"w-full h-fit flex flex-col items-center justify-center gap-3",children:(0,i.jsxs)(m.zx,{size:m.zx.size.Default,variant:m.zx.variant.Magic,onClick:()=>t({children:(0,i.jsx)(p.Z,{}),size:j.P.BigHeightFit}),children:[(0,i.jsx)(w.Z,{height:"h-6",width:"w-6",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,i.jsx)("h5",{children:"Add captures"})]})})]})]}),0==q.length&&!X&&Y&&(0,i.jsxs)("div",{className:"h-4/5 w-full relative",children:[(0,i.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,i.jsx)(o.Z,{disableAnimation:!0})}),(0,i.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center h-full w-full absolute top-0 left-0 bg-gradient-to-t from-30% from-primary-100 to-primary-100/0",children:[(0,i.jsx)("p",{className:"text-8xl",children:"\uD83E\uDDD9"}),(0,i.jsx)("h1",{children:"No matching insights"}),(0,i.jsxs)("p",{className:"text-center",children:["Upload more feedback, connect more data",(0,i.jsx)("br",{})," sources or change your filters"]}),(0,i.jsxs)("section",{className:"w-full h-fit flex flex-row items-center justify-center gap-4",children:[(0,i.jsxs)(m.zx,{size:m.zx.size.Default,variant:m.zx.variant.Secondary,onClick:()=>K(),children:[(0,i.jsx)(N.Z,{height:"h-6",width:"w-6",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,i.jsx)("h5",{children:"Clear filters"})]}),(0,i.jsxs)(m.zx,{size:m.zx.size.Default,variant:m.zx.variant.Magic,onClick:()=>t({children:(0,i.jsx)(p.Z,{}),size:j.P.BigHeightFit}),children:[(0,i.jsx)(w.Z,{height:"h-6",width:"w-6",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,i.jsx)("h5",{children:"Add captures"})]})]})]})]}),X&&(0,i.jsx)(o.Z,{})]}),(0,i.jsx)("section",{className:"fixed z-30 bottom-4 w-full flex items-center justify-center pointer-events-none",children:(0,i.jsx)("div",{className:"pointer-events-auto",children:(0,i.jsx)(f.Z,{zIndexIncrement:0,isOpen:G.length>0,selectedInsightIDs:G,onClose:()=>L([])})})})]})})};D.auth=!0,t.default=D}},function(e){e.O(0,[185,651,800,888,774,179],function(){return e(e.s=59794)}),_N_E=e.O()}]);