(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{88136:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spaces/[spaceId]/users",function(){return t(14086)}])},14086:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return W}});var r=t(97458),a=t(52983),l=t(55800),i=t(48546),n=t(43126),c=t(92924),o=t(64703),d=t(8706),u=t(26264),h=t(30543),x=t(49625),m=t(17307),p=t(37176),f=t(81456),j=t(66069),g=t(16823),w=t(34001),N=t(41526),v=t(31578),k=t(83768),b=t(44087),Z=t(59234),z=t(30744),S=e=>{let{onSearchSend:s,usersOrGroupViewValue:t,setUsersOrGroupViewValue:l}=e,[i,n]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"bg-neutral-50 border-[0.13rem] border-neutral-400 border-dashed p-2 w-fit h-16 rounded flex items-center gap-2 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 h-full",children:[(0,r.jsx)(Z.II,{placeholder:"Search",value:i,width:Z.Lu.Small,onChange:e=>{n(e.target.value)},onEnter:e=>{s(e)}}),(0,r.jsx)(b.Z,{className:"bg-neutral-400 w-4 h-[45%] ml-2",orientation:b.Z.orientation.Vertical})]}),(0,r.jsx)(z.P,{value:t,setValue:l,position:"popper",content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Q,{value:"users",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(k.Z,{height:"h-5",width:"w-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,r.jsx)("h5",{children:"Users"})]})}),(0,r.jsx)(z.Q,{value:"companies",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(v.Z,{height:"h-5",width:"w-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,r.jsx)("h5",{children:"Companies"})]})})]}),selectedValueRender:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["users"==t?(0,r.jsx)(k.Z,{height:"h-5",width:"w-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}):(0,r.jsx)(v.Z,{height:"h-5",width:"w-5",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),"users"==t?(0,r.jsx)("h5",{children:"Users"}):(0,r.jsx)("h5",{children:"Companies"})]})})]})},y=t(69682),_=t(6275),C=t(52430),D=t(98891),P=t(81270),E=t(37581),O=t(22505),I=t(62409);let V=()=>{let e=(0,h.s)(e=>e.selectedSpaceId),s=(0,w.I)(e=>e.openDialog),t=(0,w.I)(e=>e.closeDialog),v=(0,w.I)(e=>e.dialogStack),k=(0,i.Cl)(),[b,Z]=(0,a.useState)([]),[z,V]=(0,a.useState)("users"),[W,A]=(0,a.useState)(""),{data:M,fetchNextPage:F,hasNextPage:U,isLoading:R,isFetching:G,isPreviousData:L}=(0,u.N)(["get-users",e,W],async s=>{let{pageParam:t=0}=s,r=new URLSearchParams({q:W,offset:(15*t).toString(),limit:"15"});return(await x.Z.get("/spaces/".concat(e,"/users?").concat(r.toString()))).data},{getNextPageParam:e=>{let s=e.offset/e.limit;return s<Math.ceil(e.total/e.limit)-1?s+1:void 0},enabled:!!e,keepPreviousData:!0,refetchOnWindowFocus:!1,onError:()=>{y.A.error("Ooops we couldn't load your users \uD83D\uDE15",{description:"An error occured, please try again later"})},onSuccess:e=>{Q()}}),Q=async()=>{let e=[];e.push(k.accessor("first_name",{header:e=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{attributeName:"user"}),(0,r.jsx)("p",{className:"text-neutral-600",children:"User"})]}),cell:e=>(0,r.jsxs)("div",{className:"wrapper flex items-center gap-2",children:[(0,r.jsx)(c.ZP,{size:c.ZP.size.Medium,avatar_url:e.row.original.avatar_url}),(0,r.jsxs)("section",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("p",{className:"font-semibold",children:[e.getValue()," ",e.row.original.last_name]}),(0,r.jsx)(I.Z,{user:e.row.original,showOutline:!1,size:I.Z.Size.ExtraSmall})]}),(0,r.jsx)("p",{className:"text-neutral-500 font-medium",children:e.row.original.email})]})]}),size:1,minSize:1,maxSize:1})),e.push(k.accessor("insights_count",{header:e=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{attributeName:"insight"}),(0,r.jsx)("p",{className:"text-neutral-600",children:"Insights"})]}),cell:e=>(0,r.jsxs)("div",{className:"wrapper w-fit p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,r.jsx)(g.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-bold",children:[(0,j.Z)(e.getValue())," "]}),"insights"]})]}),size:1,minSize:1,maxSize:1})),e.push(k.accessor("captures_count",{header:e=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{attributeName:"capture"}),(0,r.jsx)("p",{className:"text-neutral-600",children:"Captures"})]}),cell:e=>(0,r.jsxs)("div",{className:"wrapper w-min p-2 flex gap-2 items-center bg-neutral-200 rounded",children:[(0,r.jsx)(E.Z,{height:"h-4",strokeWidth:"stroke-1.5",color:"stroke-neutral-700"}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-bold",children:[(0,j.Z)(e.getValue())," "]}),"captures"]})]}),size:1,minSize:1,maxSize:1})),Z(e)},T=(0,a.useMemo)(()=>M?M.pages.map(e=>e.users).flat():[],[M]),X=async e=>{s({children:(0,r.jsx)(o.Z,{userId:e,mode:"modal",zIndexIncrement:O.s.dialog+v.length+1}),size:w.P.ExtraLarge,padding:"p-0"})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"h-full w-full pt-1 px-1 bg-neutral-100",children:[(0,r.jsxs)("section",{className:"my-2 mx-8 sticky self-start top-2 z-20 flex items-center justify-between",children:[(0,r.jsx)(S,{onSearchSend:e=>{A(e)},usersOrGroupViewValue:z,setUsersOrGroupViewValue:V}),"users"==z&&(0,r.jsx)("div",{children:(0,r.jsxs)(m.zx,{variant:m.zx.variant.Magic,onClick:()=>s({children:(0,r.jsx)("div",{className:"flex flex-col justify-between items-center h-full w-full",children:(0,r.jsx)(N.Z,{userCaptureMapingMode:!1,onSuccess:()=>{t(),f.Z.invalidateQueries(["get-users"])},onError:()=>{y.A.error("Ooops we couldn't add this user \uD83D\uDE15",{description:"An error occured, please try again later"})}})}),size:w.P.Small}),children:[(0,r.jsx)(p.Z,{height:"h-6",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,r.jsx)("h5",{children:"Add user"})]})})]}),"companies"==z&&(0,r.jsxs)("div",{className:"h-4/5 w-full relative",children:[(0,r.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,r.jsx)(D.Z,{numberOfColumns:7,numberOfRows:10,disableAnimation:!0})}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center h-full w-full absolute top-0 left-0 bg-gradient-to-t from-30% from-primary-100 to-primary-100/0",children:[(0,r.jsx)("p",{className:"text-8xl",children:"\uD83D\uDC40"}),(0,r.jsx)("h1",{children:"Coming soon!"}),(0,r.jsx)("p",{className:"text-center",children:"We are planning on supporting companies, stay tuned!"})]})]}),M&&T.length>0&&"users"==z&&(0,r.jsx)("div",{className:"h-[100%] w-full",children:(0,r.jsx)(n.Z,{data:T,columns:b,handleClick:X,hasNextPage:U,isFetchingNextPage:R||G&&L,fetchNextPage:F})}),M&&0==T.length&&"users"==z&&(0,r.jsxs)("div",{className:"h-4/5 w-full relative",children:[(0,r.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,r.jsx)(D.Z,{numberOfColumns:7,numberOfRows:10,disableAnimation:!0})}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center h-full w-full absolute top-0 left-0 bg-gradient-to-t from-30% from-primary-100 to-primary-100/0",children:[(0,r.jsx)("p",{className:"text-8xl",children:"\uD83E\uDDF8"}),(0,r.jsx)("h1",{children:"You donâ€™t have users"}),(0,r.jsxs)("p",{className:"text-center",children:["No insights yet! Start highlighting important parts in your captures",(0,r.jsx)("br",{})," in the 'inbox' section to create valuable insights"]}),(0,r.jsx)("section",{className:"w-full h-fit flex flex-row items-center justify-center gap-4",children:(0,r.jsxs)(m.zx,{size:m.zx.size.Default,variant:m.zx.variant.Magic,onClick:()=>s({children:(0,r.jsx)(_.Z,{}),size:w.P.FitContent}),children:[(0,r.jsx)(C.Z,{height:"h-6",width:"w-6",strokeWidth:"stroke-2",stroke:"stroke-neutral-700"}),(0,r.jsx)("h5",{children:"Add captures"})]})})]})]}),!M&&(0,r.jsx)(d.G,{})]})})})};V.auth=!0;var W=V}},function(e){e.O(0,[185,651,800,888,774,179],function(){return e(e.s=88136)}),_N_E=e.O()}]);